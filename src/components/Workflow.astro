<video autoplay muted playsinline class="lazy-video w-full h-auto top-0">
  <source data-src="/video/leajlak workflow.mp4" type="video/mp4" />
</video>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const video = document.querySelector(".lazy-video") as HTMLVideoElement;
    const videoSrc = video.querySelector("source").getAttribute("data-src");

    const loadVideo = () => {
      video.load();
      video.querySelector("source").setAttribute("src", videoSrc);
    };

    const observer = new IntersectionObserver(
      (entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            loadVideo();
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 }
    );

    observer.observe(video);
  });
</script>
